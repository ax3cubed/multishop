/*!
 * Multishop Theme Assets (http://multishop.org)
 * Copyright 2020 Multishop.org. All rights reserved.
 */
/*! This file is auto-generated on September 18 2020 20:41:25., do not edit it by hand. */
/*--sanimatedsearch--*/
function sanimatedsearch(input,field,url){$('#page_modal .page-loader').show();var query=$('#'+input).val();console.log('sanimatedsearch input: '+input+', query: '+query);window.location.href=url+'&'+field+'='+query;}
/*--schildform--*/
function getchildform(url){var deletecontrol=$('#child_table').data('deleteControl');$(".page-loader").show();$.get(url,function(data){if(data.status=='success'){$('#child_table').addClass('items');$('#child_table thead').show();$('#child_table tbody').append(data.form);if(deletecontrol=='last'){$(".del-button").hide();$(".del-button:last").show();}
if(deletecontrol=='all'){$(".del-button").show();}
$(".page-loader").hide();var tr=$('#child_table tbody tr:last-child').attr('id');if($('#'+tr+' .page-tab').length>0)
$('#'+tr+' .page-tab').yiitab();}
else if(data.status=='serviceNotAvailable'){alert(data.message);$(".page-loader").hide();}
else
alert('No data found');}).error(function(XHR){error(XHR);$(".page-loader").hide();});}
function removechildform(url,key){var deletecontrol=$('#child_table').data('deleteControl');$(".page-loader").show();$.get(url+'/key/'+key,function(data){$(".page-loader").hide();if(data.status=='success'){$('#child_'+key).remove();if(deletecontrol=='last'){$(".del-button").hide();$(".del-button:last").show();}
if(data.count==0){$('#child_table thead').hide();$('#child_table').removeClass('items');}}
else{$('#flash-bar').html(data.message);scrolltop();}}).error(function(XHR){error(XHR);$(".page-loader").hide();});}
function removeallchildforms(url){$(".page-loader").show();$.get(url+'/key/all',function(data){if(data.status=='success'){$('#child_table thead').hide();$('#child_table tbody').html('');$('#child_table').removeClass('items');$(".page-loader").hide();}
else
alert('Child form cannot be deleted');}).error(function(XHR){error(XHR);$(".page-loader").hide();});}
/*--simagemanager--*/
function getimageurlform(url)
{if($('#imageurlform_modal').length>0)
$('#imageurlform_modal').remove();$.ajax({url:url,dataType:'json',cache:false,success:function(data){$('.page-container').append(data.modal);$(document).ready(function(){$(".page-container").off('click');$('#imageUrlConfirmButton').button().click(function(){addimagebyurl($(this).data('route'),$('.imageurlform-dialog').data('formModel'));});$('#imageUrlCancelButton').button().click(function(){closesmodal('#'+$(this).data('container'));});});}});}
function addimagebyurl(route,formModel){var url=route+'?u='+$('#imageurl').val();$.ajax({url:url,dataType:'json',cache:false,success:function(data){if(data.status=='success'){closesmodal('#'+$('#imageUrlCancelButton').data('container'));if(formModel=='SingleImageForm'){$('.single-image-container .template-download').remove();$('.single-image-container').append(data.html);$('#SingleImageForm-form').bind('fileuploaddestroyed',function(){restoresingleimage();});}
else{initmultiimages();$('.images-gallery table tbody').append(data.html);}}
else{alert(data.message);}}});}
function insertsingleimage(){$('.single-image-container .preview').hide();$('.single-image-container .template-download').css({height:'auto'});enabledeletebutton('#delete-button');}
function restoresingleimage(){$('.single-image-container .preview').show();$('.single-image-container .template-download').remove();}
function initmultiimages()
{$('.files').parent().removeClass('no-items');$('.files tr.empty').hide();$('.files').parent().addClass('items');$('#MultipleImagesForm-form').bind('fileuploaddestroyed',function(){restoremultiimages();});$('.page-loader').hide();}
function restoremultiimages()
{if($('.files tr').not('.empty').size()==0){$('.files').parent().removeClass('items');$('.files tr.empty').show();$('.files').parent().addClass('no-items');}}
function enabledeletebutton(selection)
{$(selection).click(function(e){e.preventDefault();var obj=$(this);$.ajax({dataType:'json',url:obj.data('url'),type:obj.data('type')})});}
function enabledeletebutton_multi(selection)
{$(selection).click(function(e){e.preventDefault();var obj=$(this);$.ajax({dataType:'json',url:obj.data('url'),type:obj.data('type')}).success(function(){obj.parent().parent().remove();restoremultiimages();});});}
function SingleImageFormProgress(event)
{$('.file-upload-progress').css({height:$('.files').height()});$('.files .preview').hide();if($('.files .template-download').length>0){$('.files .template-download').remove();}
updateprogressbar(event,'.file-upload-progress .bar');}
function MultipleImagesFormProgress(event)
{updateprogressbar(event,'.file-upload-progress td .bar');}
function updateprogressbar(event,selection)
{var percent=(event.loaded/event.total)*100;console.log('file upload progress '+percent+'%');$('.file-upload-progress').show();$(selection).css({width:percent+'%'});$(selection).html(Math.round(percent)+'%');if(percent==100)
$('.file-upload-progress').hide();}
/*--simageviewer--*/
function swapimage(cssclass,id){$('.'+cssclass+' a').hide();$('#picture-'+id).show();}
function loadfancybox(cssclass,imagename){$('.'+cssclass+' a').fancybox({transitionIn:'none',transitionOut:'none',titlePosition:'over',titleFormat:function(title,currentArray,currentIndex,currentOpts){return'<span id="fancybox-title-over"><span style="float:right">Image '+(currentIndex+1)+' / '+currentArray.length+' '+title+' </span>'+imagename+'</span>';},onComplete:function(){$("#fancybox-wrap").hover(function(){$("#fancybox-title-over").show();},function(){$("#fancybox-title-over").hide();});}});}
/*--simagezoomer--*/
function loadevelatezoom(){$('.elevatezoom').each(function(){var selection='#'+$(this).find('img').attr('id');if(mobiledisplay())
var config=evelatezoomconfig_mobile();else
var config=evelatezoomconfig_default();if($(this).find('.gallery').length>0){config.gallery=$(this).find('.gallery').attr('id');config.galleryActiveClass='active';}
if($(this).parent().hasClass('product-y-image')){config.zoomWindowPosition=11;}
$(selection).elevateZoom(config);console.log('zoomer '+selection,config);});}
function unloadevelatezoom()
{$.removeData('.elevatezoom','elevateZoom');$('.zoomContainer').remove();}
function evelatezoomconfig_default()
{return{cursor:'crosshair',scrollZoom:true,zoomWindowFadeIn:500,zoomWindowFadeOut:600,zoomWindowWidth:500,zoomWindowHeight:400,borderSize:1};}
function evelatezoomconfig_mobile()
{return{'cursor':'crosshair','scrollZoom':true,'zoomWindowFadeIn':500,'zoomWindowFadeOut':600,'zoomWindowPosition':14,'zoomWindowWidth':250,'zoomWindowHeight':200,'borderSize':1,};}
/*--smodal--*/
$(document).ready(function(){$('.smodal-wrapper .smodal-content').click(function(event){event.stopPropagation();});});function opensmodal(container,url,action){$('#smodal_loader').show();$.get(url,function(data){fillmodal(container,data,action);}).error(function(XHR){alert(XHR.status+' '+XHR.statusText+'\r\n'+XHR.responseText);});}
function closesmodal(container){$(container+' .smodal-overlay').hide();$(container+' .smodal-content').html('');$(container+' .smodal-container').hide();$('body').css('overflow','auto');}
function fillmodal(container,data,action){$(container+' .smodal-overlay').show();$(container+' .smodal-content').html(data);$(container+' .smodal-container').show();$(document).ready(function(){if(action=='signup')
signupcallback();if(action=='login')
logincallback();if(action=='preview')
previewcallback();});$('#smodal_loader').hide();}
/*--snavigationmenu--*/
$(document).ready(function(){if($('.navmenu-widget').data('pikabu')!=undefined){var pikabu=loadpikabu();console.log('pikabu loaded');}});function loadpikabu()
{var openScript='opennavmenuleft';if($('.navmenu-widget').data('onOpened').length>0){openScript=$('.navmenu-widget').data('onOpened');}
else
console.log('pikabu use default open script');return new Pikabu({'viewportSelector':'.m-pikabu-viewport','selectors':{element:'.m-pikabu-container',navToggles:'.m-pikabu-nav-toggle-icon',overlay:'.m-pikabu-overlay',common:'.m-pikabu-sidebar',left:'.m-pikabu-left',},'widths':{left:'70%',},'onInit':function(){initnavmenuleft();},'onOpened':function(){window[openScript]();},'onClosed':function(){closenavmenuleft();}});}
function initnavmenuleft()
{$('.m-pikabu-left').hide();$('.m-pikabu-left').html('<nav>'+$('.nav-menu').html()+'</nav>');$('.m-pikabu-left .m-pikabu-nav-toggle-icon').remove();}
function closenavmenuleft()
{$('.m-pikabu-left').hide();}
function opennavmenuleft()
{$('.m-pikabu-left').css({width:'80%'});$('.m-pikabu-left .nav-menuitems .quickaccess.home li.shop-menu ul').remove();var shopmenu=$('.sidebar-menu.theme.shop').html();if(shopmenu!=undefined){$('.m-pikabu-left .nav-menuitems .quickaccess.home li.shop-menu').append('<ul>'+$('.sidebar-menu.theme').html()+'</ul>');if($('.m-pikabu-left .nav-menuitems .quickaccess.language').attr('origin-height')==undefined)
calibratelangmenu($('.m-pikabu-left').height(),-5);return;}
else{calibratelangmenu(0,0);}
if($('#profile_page').length>0){$('.m-pikabu-left .nav-menuitems .quickaccess.home .profile-menu ul').show();calibratelangmenu($('.m-pikabu-left .nav-menuitems .quickaccess.home .profile-menu ul').height(),-5);return;}
else{$('.m-pikabu-left .nav-menuitems .quickaccess.home .profile-menu ul').hide();calibratelangmenu(0,0);}
if($('#account_page').length>0){$('.m-pikabu-left .nav-menuitems .quickaccess.home .account-menu ul').show();calibratelangmenu($('.m-pikabu-left .nav-menuitems .quickaccess.home .account-menu ul').height(),-5);return;}
else{$('.m-pikabu-left .nav-menuitems .quickaccess.home .account-menu ul').hide();calibratelangmenu(0,0);}}
function calibratelangmenu(offset,adjust)
{var langMenuTopPos=parseInt($('.m-pikabu-left .nav-menuitems .quickaccess.language').css('top'),10);var height=langMenuTopPos+offset+adjust;$('.m-pikabu-left .nav-menuitems .quickaccess.language').css({top:height});$('.m-pikabu-left .nav-menuitems .quickaccess.language').attr('origin-height',langMenuTopPos);}
/*--soffcanvasmenu--*/
function openoffcanvasmenu_overlay(menuId,width){var menu=document.getElementById(menuId);if(menu.style.width==0||menu.style.width=='0px'){menu.style.width=width;}
else{closeoffcanvasmenu_overlay(menuId);}}
function closeoffcanvasmenu_overlay(menuId){document.getElementById(menuId).style.width="0";}
function openoffcanvasmenu_push(menuId,pageId,width){var menu=document.getElementById(menuId);if(menu.style.width==0||menu.style.width=='0px'){menu.style.width=width;if($('#'+menuId+'.left').length>0)
document.getElementById(pageId).style.marginLeft=width;if($('#'+menuId+'.right').length>0)
document.getElementById(pageId).style.marginRight=width;$('#'+pageId).css({'width':'100%'});}
else{closeoffcanvasmenu_push(menuId,pageId);}}
function closeoffcanvasmenu_push(menuId,pageId){document.getElementById(menuId).style.width="0";if($('#'+menuId+'.left').length>0)
document.getElementById(pageId).style.marginLeft="0";if($('#'+menuId+'.right').length>0)
document.getElementById(pageId).style.marginRight="0";}
function openoffcanvasmenu_full(menuId){document.getElementById(menuId).style.width="100%";}
function closeoffcanvasmenu_full(menuId){document.getElementById(menuId).style.width="0";}
/*--spage--*/
function submitform(id){$('.page-loader').show();$('#'+id).submit();}
function error(XHR){$('#loading').hide();var err=XHR.status+' '+XHR.statusText+'<br>';err+=XHR.responseText;$('#flash-bar').attr('class','flash-error').html(err).show();scrolltop();}
function errormsg(msg){$('#flash-bar').attr('class','flash-error').html(msg).show();scrolltop();}
function clearerror(){$('#flash-bar').removeClass();$('#flash-bar').html('');$('div.errorSummary').remove();$('div.errorMessage').remove();$('.page-content div label').toggleClass();$('div input').removeClass('error');$('div select').removeClass('error');$('div textarea').removeClass('error');}
function scrolltop(){var new_position=$('body').offset();window.scrollTo(new_position.left,new_position.top);}
/*--spagefilter--*/
function submitpagefilterform(id){$('.page-loader').show();var formArray=$('#'+id).serializeArray();formArray.splice(0,1);var opsArray=new Array();for(var key in formArray){if(formArray[key].name.substr(-3)=='_op')
opsArray.push(formArray[key]);}
var output=new Array();for(var key in formArray){if(formArray[key].name.substr(-3)!='_op'&&formArray[key].value.length>0){var op='';for(var opKey in opsArray){if(formArray[key].name+'_op'==opsArray[opKey].name){op=opsArray[opKey].value;break;}}
output.push(formArray[key].name+'='+encodeURIComponent(op+formArray[key].value));}}
var serialize=output.join('&');var url=$('#'+id).attr('action')+'&'+serialize;window.location.href=url;}
function pagefiltertextonchange(selection,form,field)
{$('.'+selection+' #'+field).change(function(){submitpagefilterform(form);});}
function pagefilterselectonchange(selection,form,field)
{pagefiltertextonchange(selection,form,field);}
function pagefilterdateonchange(selection,form,field,autoSubmitOps)
{var autoSubmitOpsArray=$.parseJSON(autoSubmitOps);$('.'+selection+' #'+field+'_op').change(function(){var selectedOp=$(this).find('option:selected').attr('value');for(var key in autoSubmitOpsArray){if(selectedOp==key){var d=new Date();d.setDate(d.getDate()-autoSubmitOpsArray[key]);var dStr=d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate();$('.'+selection+' #'+field).val(dStr);submitpagefilterform(form);return;}}
if($('.'+selection+' #'+field).length>0)
submitpagefilterform(form);});pagefiltertextonchange(selection,form,field);}
function refreshpagefilterform(selection,datefield)
{var form=$('.'+selection+' .form form').attr('id');$('.'+selection+' input[type="text"]').each(function(i,e){if($(this).attr('id')!=datefield)
pagefiltertextonchange(selection,form,$(this).attr('id'));});$('.'+selection+' input[type="textarea"]').each(function(i,e){pagefiltertextonchange(selection,form,$(this).attr('id'));});$('.'+selection+' select').each(function(i,e){if($(this).attr('id').substr(-3)!='_op')
pagefiltertextonchange(selection,form,$(this).attr('id'));});var autoSubmitOps=JSON.stringify($('.'+selection+' input#'+datefield).data('autoSubmitOps'));pagefilterdateonchange(selection,form,datefield,autoSubmitOps);enabledatepicker(selection,datefield);}
function preparemobilepagefilter()
{if(mobiledisplay()){$('.spagefilter-mobile').remove();$('.page-content > .page').prepend('<div class="spagefilter-mobile">'+$('.spagefilter').html()+'</div>');$('.spagefilter-mobile h1 i').removeClass('fa-search');$('.spagefilter-mobile h1 i').addClass('fa-caret-down');$('.spagefilter-mobile h1').click(function(){$('.spagefilter-mobile .form').toggle();if($('.spagefilter-mobile h1').find('i').hasClass('fa-caret-down')){$('.spagefilter-mobile h1').find('i').removeClass('fa-caret-down');$('.spagefilter-mobile h1').find('i').addClass('fa-caret-up');}
else{$('.spagefilter-mobile h1').find('i').removeClass('fa-caret-up');$('.spagefilter-mobile h1').find('i').addClass('fa-caret-down');}});$(document).ready(function(){$('.spagefilter').remove();refreshpagefilterform('spagefilter-mobile','date');$('.spagefilter-mobile input[type="text"]').each(function(i,e){if($(this).val().length>0){$('.spagefilter-mobile h1 i').removeClass('fa-caret-down');$('.spagefilter-mobile h1 i').addClass('fa-caret-up');$('.spagefilter-mobile .form').css({'display':'block'});}});});}}
function enabledatepicker(selection,field)
{$('.'+selection+' #'+field).datepicker({'showAnim':'fold','showOn':'both','changeMonth':true,'changeYear':true,'dateFormat':'yy-mm-dd','gotoCurrent':true,'buttonImage':$('.'+selection+' #date').data('icon'),'buttonImageOnly':true,});}
/*--spageindex--*/
function filter(route,model,scope,callback){if($('#pageindex_loader.absolute').length>0){var pos=$(window).scrollTop()+$(window).height()/2;$('#pageindex_loader.absolute').css({'top':pos,'bottom':'auto'});}
var viewOption=$('.main-view .body > div').data('viewOption');$('#pageindex_loader').show();$.get('/'+route+'?scope='+scope+'&option='+viewOption,function(data){renderarrow(scope);rendertab(scope);renderpagemenu(scope);$('.main-view .body').html(data.widget);if($('.spagefilter').length>0){$('.page-sidebar').html(data.pagefilter);}
$('#pageindex_loader').hide();renderpagedescription($('.grid-view').length?'gridview':'listview');$(document).ready(function(){if($('.spagefilter').length>0){refreshpagefilterform('spagefilter','date');}
if($('.grid-view').length>0){jQuery('#'+scope).yiiGridView({ajaxUpdate:[scope],ajaxVar:'ajax',pagerClass:'spager',loadingClass:'grid-view-loading',filterClass:'filters',tableClass:'items',selectableRows:1,enableHistory:false,updateSelector:'{page}, {sort}',filterSelector:'{filter}',pageVar:model+'_page'});}
if($('.list-view').length>0){jQuery('#'+scope).yiiListView({ajaxUpdate:[scope],ajaxVar:'ajax',pagerClass:'spager',loadingClass:'list-view-loading',sorterClass:'sorter',enableHistory:false});}});console.log('filter callback function ',callback);callback();}).error(function(XHR,textStatus,errorThrown){error(XHR,textStatus,errorThrown);});}
function rendertab(scope){$('.main-view .heading .tabs a').removeClass('active');$('#tab-'+scope+' a').addClass('active');}
function renderarrow(scope){if($('.main-view .heading .arrow-wrapper').length>0){$('.main-view .heading .arrows li').removeClass('active');$('.main-view .heading #arrow-'+scope).addClass('active');$('.main-view .heading .arrow-wrapper').removeClass('show');$('.main-view .heading .arrow-wrapper').addClass('hidden');var position=$('#arrow-'+scope).position();var offset=$('#arrow-'+scope).width()/2-10;$('.main-view .heading .arrow-wrapper.'+scope).css({left:position.left+offset,position:'absolute'});$('.main-view .heading .arrow-wrapper.'+scope).removeClass('hidden');$('.main-view .heading .arrow-wrapper.'+scope).addClass('show');}}
function listviewupdate(){if($('.star-rating').length>0){$('.star-rating > input').rating({'readOnly':true});}}
function renderpagemenu(scope){$('.pageindex-page-menu').removeClass('active');$('.pageindex-page-menu.'+scope).addClass('active');}
function renderpagedescription(viewoption){var desc='';if(viewoption=='gridview')
desc=$('.main-view .body .grid-view').data('description');else
desc=$('.main-view .body .list-view').data('description');$('.main-view .heading .description').html(desc);}
/*--spagelayout--*/

/*--spagesection--*/
$(document).ready(function(){enablesectionbuttons();});function enablesectionbuttons(){var mode=$('#section-buttonmode').text();if(mode=='image')
enableimagebuttons();else
enabletextbuttons();}
function enabletextbuttons(){$('.section-button').click(function(){$('.'+$(this).attr('name')+' .section-body').slideToggle(0);if($(this).find('i').hasClass('fa-angle-down')){$(this).find('i').removeClass('fa-angle-down');$(this).find('i').addClass('fa-angle-right');}
else{$(this).find('i').removeClass('fa-angle-right');$(this).find('i').addClass('fa-angle-down');}});$('.section-button-all').click(function(){if($(this).find('i').hasClass('fa-angle-double-up')){$(this).find('i').removeClass('fa-angle-double-up');$(this).find('i').addClass('fa-angle-double-down');$('.section-body').hide();$('.section-button').find('i').removeClass('fa-angle-down');$('.section-button').find('i').addClass('fa-angle-right');}
else{$(this).find('i').removeClass('fa-angle-double-down');$(this).find('i').addClass('fa-angle-double-up');$('.section-body').show();$('.section-button').find('i').removeClass('fa-angle-right');$('.section-button').find('i').addClass('fa-angle-down');}});}
function enableimagebuttons(){var asseturl=$('#section-asseturl').text();$('.section-button img').click(function(){$('.'+$(this).parent().attr('name')+' .section-body').slideToggle(0);if($(this).attr('src')==asseturl+'/open.jpg')
$(this).attr('src',asseturl+'/close.jpg');else
$(this).attr('src',asseturl+'/open.jpg');});$('.section-button-all img').click(function(){if($(this).attr('src')==asseturl+'/open.jpg'){$(this).attr('src',asseturl+'/close.jpg');$('.section-body').show();$('.section-button img').attr('src',asseturl+'/close.jpg');}
else{$(this).attr('src',asseturl+'/open.jpg');$('.section-body').hide();$('.section-button img').attr('src',asseturl+'/open.jpg');}});}
/*--ssearch--*/
function ssearch(input,field,url){$('#page_modal .page-loader').show();var query=$('#'+input).val();console.log('ssearch input: '+input+', query: '+query);window.location.href=url+'&'+field+'='+query;}
/*--susermenu--*/
function openoffcanvascartmenu(){openoffcanvasmenu_overlay("offcanvas_cart_menu","300px");}
function closeoffcanvascartmenu(){closeoffcanvasmenu_overlay("offcanvas_cart_menu");}
function openoffcanvasshopmenu(){openoffcanvasmenu_push("offcanvas_shop_menu","canvas_page_content","300px");}
function closeoffcanvasshopmenu(){closeoffcanvasmenu_push("offcanvas_shop_menu","canvas_page_content");}
function openoffcanvasloginmenu(){openoffcanvasmenu_push("offcanvas_login_menu","canvas_page_content","300px");}
function closeoffcanvasloginmenu(){closeoffcanvasmenu_push("offcanvas_login_menu","canvas_page_content");}
function openoffcanvaswcmmenu(){openoffcanvasmenu_push("offcanvas_wcm_menu","canvas_page_content","300px");}
function closeoffcanvaswcmmenu(){closeoffcanvasmenu_push("offcanvas_wcm_menu","canvas_page_content");}
function openoffcanvascommunitymenu(){openoffcanvasmenu_push("offcanvas_community_menu","canvas_page_content","300px");}
function closeoffcanvascommunitymenu(){closeoffcanvasmenu_push("offcanvas_community_menu","canvas_page_content");}
function openoffcanvasadminmenu(){openoffcanvasmenu_push("offcanvas_admin_menu","canvas_page_content","300px");}
function closeoffcanvasadminmenu(){closeoffcanvasmenu_push("offcanvas_admin_menu","canvas_page_content");}
function openoffcanvasshopmgmtmenu(){openoffcanvasmenu_push("offcanvas_shopmgmt_menu","canvas_page_content","300px");}
function closeoffcanvasshopmgmtmenu(){closeoffcanvasmenu_push("offcanvas_shopmgmt_menu","canvas_page_content");}