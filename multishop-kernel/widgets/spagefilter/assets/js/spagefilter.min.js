function submitpagefilterform(id){$('.page-loader').show();var formArray=$('#'+id).serializeArray();formArray.splice(0,1);var opsArray=new Array();for(var key in formArray){if(formArray[key].name.substr(-3)=='_op')
opsArray.push(formArray[key]);}
var output=new Array();for(var key in formArray){if(formArray[key].name.substr(-3)!='_op'&&formArray[key].value.length>0){var op='';for(var opKey in opsArray){if(formArray[key].name+'_op'==opsArray[opKey].name){op=opsArray[opKey].value;break;}}
output.push(formArray[key].name+'='+encodeURIComponent(op+formArray[key].value));}}
var serialize=output.join('&');var url=$('#'+id).attr('action')+'&'+serialize;window.location.href=url;}
function pagefiltertextonchange(selection,form,field)
{$('.'+selection+' #'+field).change(function(){submitpagefilterform(form);});}
function pagefilterselectonchange(selection,form,field)
{pagefiltertextonchange(selection,form,field);}
function pagefilterdateonchange(selection,form,field,autoSubmitOps)
{var autoSubmitOpsArray=$.parseJSON(autoSubmitOps);$('.'+selection+' #'+field+'_op').change(function(){var selectedOp=$(this).find('option:selected').attr('value');for(var key in autoSubmitOpsArray){if(selectedOp==key){var d=new Date();d.setDate(d.getDate()-autoSubmitOpsArray[key]);var dStr=d.getFullYear()+'-'+(d.getMonth()+1)+'-'+d.getDate();$('.'+selection+' #'+field).val(dStr);submitpagefilterform(form);return;}}
if($('.'+selection+' #'+field).length>0)
submitpagefilterform(form);});pagefiltertextonchange(selection,form,field);}
function refreshpagefilterform(selection,datefield)
{var form=$('.'+selection+' .form form').attr('id');$('.'+selection+' input[type="text"]').each(function(i,e){if($(this).attr('id')!=datefield)
pagefiltertextonchange(selection,form,$(this).attr('id'));});$('.'+selection+' input[type="textarea"]').each(function(i,e){pagefiltertextonchange(selection,form,$(this).attr('id'));});$('.'+selection+' select').each(function(i,e){if($(this).attr('id').substr(-3)!='_op')
pagefiltertextonchange(selection,form,$(this).attr('id'));});var autoSubmitOps=JSON.stringify($('.'+selection+' input#'+datefield).data('autoSubmitOps'));pagefilterdateonchange(selection,form,datefield,autoSubmitOps);enabledatepicker(selection,datefield);}
function preparemobilepagefilter()
{if(mobiledisplay()){$('.spagefilter-mobile').remove();$('.page-content > .page').prepend('<div class="spagefilter-mobile">'+$('.spagefilter').html()+'</div>');$('.spagefilter-mobile h1 i').removeClass('fa-search');$('.spagefilter-mobile h1 i').addClass('fa-caret-down');$('.spagefilter-mobile h1').click(function(){$('.spagefilter-mobile .form').toggle();if($('.spagefilter-mobile h1').find('i').hasClass('fa-caret-down')){$('.spagefilter-mobile h1').find('i').removeClass('fa-caret-down');$('.spagefilter-mobile h1').find('i').addClass('fa-caret-up');}
else{$('.spagefilter-mobile h1').find('i').removeClass('fa-caret-up');$('.spagefilter-mobile h1').find('i').addClass('fa-caret-down');}});$(document).ready(function(){$('.spagefilter').remove();refreshpagefilterform('spagefilter-mobile','date');$('.spagefilter-mobile input[type="text"]').each(function(i,e){if($(this).val().length>0){$('.spagefilter-mobile h1 i').removeClass('fa-caret-down');$('.spagefilter-mobile h1 i').addClass('fa-caret-up');$('.spagefilter-mobile .form').css({'display':'block'});}});});}}
function enabledatepicker(selection,field)
{$('.'+selection+' #'+field).datepicker({'showAnim':'fold','showOn':'both','changeMonth':true,'changeYear':true,'dateFormat':'yy-mm-dd','gotoCurrent':true,'buttonImage':$('.'+selection+' #date').data('icon'),'buttonImageOnly':true,});}